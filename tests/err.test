lappend auto_path [pwd]/../
package require tcltest
package require finsum

tcltest::test err-1.0 {
	parse 017.023
} -body {
	finsum::parse 017.023
} -returnCodes error -result "fractional part is too large: 023"

tcltest::test err-2.0 {
	parse 017.023
} -body {
	set finsum::ignore_errors 1
	set ret [finsum::parse 017.023]
	set finsum::ignore_errors 0
	return $ret
} -result 1702

tcltest::test err-3.0 {
	parse 0-17.-023
} -body {
	finsum::parse 0-17.-023
} -returnCodes error -result "integer part is not an integer: 0-17"

tcltest::test err-4.0 {
	parse 017.-023
} -body {
	finsum::parse 017.-023
} -returnCodes error -result "fractional part is not an unsigned integer: -023"

tcltest::test err-5.0 {
	parse 017.02.3
} -body {
	finsum::parse 017.02.3
} -returnCodes error -result "sum isn't a number: 017.02.3"

tcltest::cleanupTests
